{% extends "layout.html" %}

{% set active_page = "quotes" %}

{% macro quote_inner(quote) %}
<div class="quote-text">{{ quote.cleaned() }}</div>
<div class="quote-meta">
  {% if quote.who %}
  <div class="quote-who">&mdash; {{ quote.who }}</div>
  {% endif %}
  <div class="lower">
    <a class="quote-when" href="{{ url_for('quotes.quote', quote_id=quote.id) }}">{{ format_datetime(quote.timestamp, "dd MMMM yyyy, HH:mm") }}</a></span>
    <span class="reactions">
      {% for reaction in reactions %}
      <form method="POST" action="{{ url_for('quotes.add_reaction', quote_id=quote.id) }}">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <input type="hidden" name="reaction_id" value="{{ reaction.id }}">
        <button class="react-button" type="submit" data-reactionid="{{ reaction.id }}">
          {{ reaction.item }}
        </button>
      </form>
      {% endfor %}
    </span>
  </div>
</div>
{% endmacro %}

{% macro quote_card(quote) %}
<div class="quote card">
  {{ quote_inner(quote) }}
</div>
{% endmacro %}

{% block body %}
<div class="cards">
  <h2>{{ _("Citat") }}</h2>
  <p><a href="{{ url_for('quotes.add_quote') }}">{{ _("LÃ¤gg till citat") }}</a></p>
  {% if not quotes %}
  <p>{{ _("No quotes yet!") }}</p>
  {% endif %}
  {% for quote in quotes %}
  {{ quote_card(quote) }}
  {% endfor %}
</div>
{% endblock %}
